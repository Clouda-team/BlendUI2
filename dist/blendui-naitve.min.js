/*! blendui-naitve v0.1 - 2015-04-20 - http://clouda.com */
!function(){var t={};t["src/core/lib"]=function(){var t={};t.extend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},t.noop=function(){},t.each=function(t,e,i){for(var n in t)if(t.hasOwnProperty(n)&&e.call(i||t,n,t[n],t)===!1)return},t.isClass=function(t){return"function"==typeof t&&t.prototype&&t===t.prototype.constructor},t.toCamel=function(t){return t=t||"",t=t.replace(/-([a-z])/gi,function(t,e){return e.toUpperCase()})},t.toPascal=function(e){return e=t.toCamel(e),e=e.charAt(0).toUpperCase()+e.slice(1)},t.cutOn=function(t){return 0===t.indexOf("on")&&(t=t.slice(2),t=t.charAt(0).toLowerCase()+t.slice(1)),t};var e=0;t.uniqueId=function(t){var i="_"+ ++e;return(t||"UNIQUEID")+i};var i=navigator.userAgent.toLowerCase();t.isAndroid=-1!==i.indexOf("android"),t.isIphone=-1!==i.indexOf("iphone");var n=t.isUIX=function(){var t=i.match(/uix\/(\d+\.\d+\.\d+\.\d+)/);return t?t[1]:""}();return t.ready=function(t){n?window.lc_bridge?t():document.addEventListener("uixready",t,!1):(t(),console&&console.warn("非Naitve Uix环境"))},t}(),t["src/core/Class"]=function(){var e=t["src/core/lib"],i=e.noop,n=e.extend,s=e.cutOn,r={};Object.create||(Object.create=function(t){function e(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return e.prototype=t,new e}),r.create=function(t){function o(t){this._listener=[];for(var i in this._events)this._events.hasOwnProperty(i)&&(this._listener[i]=[],this._listener[i].push(this._events[i]));this.attributes=n({},a),this.id=t&&t.id||e.uniqueId("CLASSID"),r.register(this),this.init&&this.init.apply(this,arguments)}var c=t.extend||i,a=t.attributes||{},u=t.events||{},h=t.statics||{};delete t.attributes,delete t.events,delete t.statics,delete t.extend;var f=o.prototype=Object.create(c.prototype);return f.constructor=o,f.Super=o.Super=c.prototype,o.Parent=c,f._events=n(f._events||{},u),n(f,{set:function(t,i){this.attributes[t]!==i&&(this._previousAttributes=n({},this.attributes),"object"==typeof this.attributes[t]&&n(this.attributes[t],i),this.attributes[t]=i,this["_set"+e.toPascal(t)]&&this["_set"+e.toPascal(t)](t,i),this.fire("change:"+t,[t,i]),this.fire("change",[t,i]))},get:function(t){return this.attributes[t]},on:function(t,e){var i=this;t=s(t),i._listener[t]||(i._listener[t]=[]),i._listener[t].push(e)},fire:function(t,e,i){t=s(t);var n,r,o=this._listener[t];if(!t)throw new Error("未指定事件名");if(i=i||this,o)for(n=0,r=o.length;r>n;n++)o[n].apply(i,e)},off:function(t,e){t=s(t);var i=this._listener[t];if("all"===t)return void(this._listener=[]);if(i){if(!e)return void delete this._listener[t];i.splice(i.indexOf(e),1),i.length||delete this._listener[t]}}}),n(o,h),n(f,t),o};var o={};return r.get=function(t){return o[t]},r.register=function(t){o[t.id]=t},r.cancel=function(t){delete o[t.id]},r}(),t["src/core/config"]=function(){var t={debug:!0,widgetList:{title:{nativeName:"title",type:1},tab:{nativeName:"tab",type:1},navigation:{nativeName:"navi",type:1},toolbar:{nativeName:"toolbar",type:1},gallery:{nativeName:"gallery",type:2},dialog:{nativeName:"dialog",type:2}}};return t}(),t["src/core/native"]=function(){var e=t["src/core/config"],i=e.debug,n=e.widgetList,s={},r=function(t,e){try{var i=window.lc_bridge;return i[t].apply(i,e)}catch(n){console&&console.log("Api_Error:"+t),console&&console.log(n)}},o={},c=null,a=function(t,e){e?o[t]=e:delete o[t],c&&clearTimeout(c),c=setTimeout(function(){i&&console.log(o),r("UIXSetDecorationNoCache",[JSON.stringify(o)])})},u=function(t,e){c&&clearTimeout(c),c=setTimeout(function(){i&&console.log(e),r("UIXShow",[t,JSON.stringify(e)])})};return s.render=function(t,e){if(!n[t])return void console.log("不支持:"+t+"组件");var i=n[t].type,s=n[t].nativeName;1===i?a(s,e):2===i&&u(s,e)},s.setPropertyById=function(t,e){return"string"!=typeof e&&(e=JSON.stringify(e)),r("UIXSetProperty",[t,e])},s.postMessage=function(t,e,i){i?r("postMessage",[t,e,i]):(i=e,e=t,t=null,r("postMessage",[e,i]))},s.execScript=function(t,e){r("exeJsRemote",[t,e])},s.getWidgetList=function(){var t=window.lc_bridge,e=t.getWidgetList?t.getWidgetList():Object.keys(n);return e},s.dataHook=function(t,e){i&&console.log(t,e),r("UIXEvent",[t,JSON.stringify(e)])},s.execAction=function(t){s.dataHook("button_action",{option:"action("+t+")"})},s.open=function(t){s.dataHook("button_action",{option:"loadurl("+t+")"})},s}(),t["src/widgets/Style"]=function(){var e=t["src/core/Class"],i=t["src/core/lib"],n=function(t,e){var i;e=e||1,e=Math.ceil(255*e).toString(16),t=t||"#000000";var n=function(t){return("00"+Number(t).toString(16)).substr(-2)};if(0===t.indexOf("#"))t=t.slice(1),3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);else if(i=t.match(/^[\s]*rgb[a]?[\s]*\(([\,\d\s]+)\)/i)){i=i[1].split(","),i[3]&&(e=n(i[3])),t="";for(var s=0;3>s;s++)t+=n(i[s])}return"#"+e+t},s=e.create({init:function(t){return this.config={},this._setOptions(t),this},type:"style",events:{change:function(t){this["_parse"+i.toPascal(t)]?this["_parse"+i.toPascal(t)](t):this.config[t]=this.get(t),this.render()}},_setOptions:function(t){t=t||{};var i=t.data;return this.superId=t.superId,e.get(t.superId)&&(this.parentConfig=e.get(t.superId).config,this.parentConfig.style=this.config),i&&this.update(i),this},_parseOpacity:function(){return this._parseColor(),this._parseBackgroundColor(),this},_parseColor:function(){var t=this.get("color"),e=this.get("opacity");return this.config.color=n(t,e),this},_parseBackgroundColor:function(){var t=this.get("backgroundColor"),e=this.get("opacity");return this.config.backgroundColor=n(t,e),this},update:function(t){t=t||{};for(var e in t)t.hasOwnProperty(e)&&this.set(i.toCamel(e),t[e]);return this},render:function(){return e.get(this.superId)&&e.get(this.superId).render(),this},destroy:function(){return delete this.parentConfig.style,this.fire("destroy"),this.off("all"),this}});return s}(),t["src/widgets/Item"]=function(){var e=t["src/core/Class"],i=t["src/widgets/Style"],n=t["src/core/lib"];document.addEventListener("UIXClick",function(t){var i=JSON.parse(t.data),n=i.id;e.get(n).fire("tap")});var s=e.create({init:function(t){return this.config={},this._inited=!1,this._setOptions(t),e.register(this),this},type:"item",events:{change:function(t){this["_parse"+n.toPascal(t)]?this["_parse"+n.toPascal(t)](t):this.config[t]=this.get(t),this.render()}},_setOptions:function(t){t=t||{};var e=t.data||{};this.superId=t.superId;for(var i in e)e.hasOwnProperty(i)&&(0===i.indexOf("on")?this.bind(n.cutOn(i),e[i]):"function"!=typeof e[i]?this.set(i,e[i]):this[i]=e[i]);return this},_parseStyle:function(){return this.styleObj||(this.styleObj=new i({superId:this.id})),this.style(),this},_parseAction:function(t,e){var i;return"href"===t?i="loadurl("+this.get("href")+")":"tap"===t?i='uievent({"id":"'+this.id+'"})':"native"===t&&(i="action("+e+")"),i},_parseHref:function(){return this.config.action=this._parseAction("href"),this},_parseIndex:function(){var t=this._items,e=this.get("index");return this._inited&&this.remove(),t.splice(e,0,this.config),this},appendTo:function(t,e){return this._inited=!0,this._items=t,this.index=e||t.length,this.set("index",this.index),this},style:function(t){if(1===arguments.length&&"string"==typeof t)return this.styleObj.get(t);if(this.get("style")||this.set("style",{}),1===arguments.length&&"Object"==typeof t)n.extend(this.get("style"),t);else if(2===arguments.length){var e={};e[arguments[0]]=arguments[1],this.style(e)}return this.styleObj.update(this.get("style")),this},bind:function(t,e){return"string"==typeof e?this.config.action=this._parseAction("native",e):(this.on(t,e),this.config.action=this._parseAction("tap")),this},unbind:function(t){return this.off("tap",t),this},remove:function(){return this._items.splice(this.index,1),this.fire("onremove"),this},render:function(){return this._inited&&e.get(this.superId).render(),this},destroy:function(){this.remove(),e.cancel(this),this.fire("destroy"),this.off("all")}});return s}(),t["src/widgets/Widget"]=function(){var e=t["src/core/Class"],i=t["src/core/native"],n=(t["src/core/lib"],t["src/widgets/Style"]),s=t["src/widgets/Item"],r=e.create({init:function(t){t=t||{},this.itemList={},this.config={},"function"==typeof this._init&&this._init.apply(this,arguments),this.styleInstance=new n({superId:this.id,data:t.style?t.style:{}}),t&&this._setConfig(t),this.render()},events:{change:function(t){var e,i=this.filterConfig;if(this.itemTypes&&-1!==this.itemTypes.indexOf(t))for(var n=0;n<this.get(t).length;n++)e=this.create(this.get(t)[n]),this.append(e,t);else i&&-1!==i.indexOf(t)&&(this.config[t]=this.get(t));this.render()}},_setConfig:function(t){var e;for(e in t)t.hasOwnProperty(e)&&this.set(e,t[e])},create:function(t){var e={superId:this.id,data:t};return new s(e)},append:function(t,e){e=e?e:"items";var i;return this.config[e]instanceof Array||(this.config[e]=[]),i=this.config[e],t.appendTo(i),this.itemList[e]=this.itemList[e]?this.itemList[e]:[],this.itemList[e].push(t),this},removeItem:function(t,e){return this.itemList[t]&&this.itemList[t].splice(e,1).remove(),this},style:function(t){if(1===arguments.length&&"string"==typeof t)return this.styleInstance.get(t);if(2===arguments.length&&"string"==typeof t){var e={};e[arguments[0]]=arguments[1],this.style(e)}return this._setStyle("style",t),this},_setStyle:function(t,e){return this.styleInstance.update(e),this},show:function(){this.config=this.configCache?this.configCache:this.config,delete this.configCache,this.render()},hide:function(){this.configCache=this.config,delete this.config,this.render()},render:function(){this.fire("beforeRender"),i.render(this.type,this.config),this.fire("render")},destroy:function(){delete this.config,this.render(),this.off("all")}});return r}(),t["src/widgets/Title"]=function(){var e=t["src/core/Class"],i=t["src/widgets/Widget"],n=e.create({extend:i,type:"title",_init:function(t){this.itemTypes=["center","left","right"],this.filterConfig=["id"],this._setImage=this._setTitleItem,this._setTitle=this._setTitleItem},_setTitleItem:function(t,e){var i={};t="title"===t?"text":t,i[t]=e,this.titleItem?this.titleItem.set(t,e):(this.titleItem=this.create(i),this.append(this.titleItem,"center"))}});return n}(),t["src/widgets/Tab"]=function(){var e=t["src/core/Class"],i=t["src/widgets/Widget"],n=e.create({extend:i,type:"tab",_init:function(t){this.itemTypes=["items"],this.filterConfig=["id"]}});return n}(),t["src/widgets/Navigation"]=function(){var e=t["src/core/Class"],i=t["src/widgets/Widget"],n=t["src/core/native"],s=e.create({extend:i,type:"navigation",_init:function(t){this.itemTypes=["items"],this.filterConfig=["id","type"]},show:function(){n.execAction("navi")}});return s}(),t["src/widgets/Toolbar"]=function(){var e=t["src/core/Class"],i=t["src/widgets/Widget"],n=e.create({extend:i,type:"toolbar",_init:function(){this.itemTypes=["items"],this.filterConfig=["id"]}});return n}(),t["src/widgets/Gallery"]=function(){var e=t["src/core/Class"],i=t["src/widgets/Widget"],n=e.create({extend:i,type:"gallery",_init:function(t){return this.itemTypes=["center","left","right"],this.filterConfig=["id","gallery","index"],this},show:function(){this.render()},_setImages:function(t,e){var i,n=e;"object"==typeof n&&n.constructor===Array&&(i=n);for(var s=0,r=i.length;r>s;s++)i[s].text=i[s].title,delete i[s].title;return this.set("gallery",i),this}});return n}(),t["src/widgets/Dialog"]=function(){var e=t["src/core/Class"],i=t["src/widgets/Widget"],n=t["src/core/native"],s=e.create({extend:i,type:"dialog",_init:function(t){this.itemTypes=["items"],this.filterConfig=["title","description"]},_setTitle:function(t,e){this.config.text=e},show:function(){n.render("dialog",this.config)},hide:function(){n.render("dialog",{})}});return s}(),t["src/widgets"]=function(){var e=t["src/widgets/Title"],i=t["src/widgets/Tab"],n=t["src/widgets/Navigation"],s=t["src/widgets/Toolbar"],r=t["src/widgets/Gallery"],o=t["src/widgets/Dialog"],c={};return c.title=e,c.tab=i,c.navigation=n,c.toolbar=s,c.gallery=r,c.dialog=o,c}(),t["src/core/event"]=function(){var e=t["src/core/lib"],i=t["src/core/native"],n={},s={},r=function(){return e.isUIX?function(t,e,n){var s={type:t};i.postMessage("event_register",s),document.addEventListener(t,e,n)}:function(t,e,i){document.addEventListener(t,e,i)}}(),o=function(){return e.isUIX?function(t,e,n){var s={type:t};i.postMessage("event_unregister",s),document.removeEventListener(t,e,n)}:function(t,e,i){document.removeEventListener(t,e,i)}}(),c=function(){return e.isUIX?function(t,e){var n={type:t,message:e};i.postMessage("delegate",n)}:function(t,e){var i=document.createEvent("Event");i.initEvent(t,!0,!0),i.data=e,document.dispatchEvent(i,e)}}();return n.on=function(t,e){s[t]?(s[t].listener.push({callback:e,context:null}),s[t].listened||(r(t,s[t].callback,!1),s[t].listened=!0)):(s[t]={},s[t].listener=[],s[t].callback=function(e){for(var i=s[t].listener,n=0,r=i.length;r>n;n++)i[n].callback.call(i[n].context,e)},this.on(t,e))},n.off=function(t,e,i){if(i=i||this,s[t])if(e){var n,r=s[t].listener;n=r.indexOf(e),r.splice(n,1),0===r.length&&s[t].listened&&(o(t,s[t].callback),s[t].listened=!1)}else o(t,s[t].callback,!1),s[t].listened=!1,s[t].listener.length=0},n.fire=function(t,e){c(t,e)},n}(),t["src/blend"]=function(){var e=t["src/core/lib"],i=t["src/widgets"],n=t["src/core/event"],s=t["src/core/native"],r={};r.ACTIVEBACK="back",r.WIDGETNAVI="navi",r.WIDGETSHARE="share",r.create=function(t,n){var s=i[t];return s&&e.isClass(s)?new s(n):null};var o=1*new Date;r.readyState=!1;var c=[];return e.ready(function(){r.readyState=!0,r.initTime=1*new Date-o,c.forEach(function(t,e){t()}),c=[]}),r.ready=function(t){r.readyState?t():c.push(t)},r.isUIX=e.isUIX,r.back=function(){s.execAction("back")},r.open=function(t){s.open(t)},e.extend(r,n),r}(),function(){var e=t["src/blend"];window.Blend=e}(),t["src/main"]=void 0}();